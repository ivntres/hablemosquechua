<template name="scheduleEdit">
  <form id="editScheduleForm">
    <div class="row-fluid">
      <div class="span11 offset1 last"><h2>
        {{#if currSchedule}}
          Edici√≥n de Schedule {{currSchedule.nombre}}
        {{else}}
          Nuevo Schedule
        {{/if}}
      </h2></div>
    </div>

    <div class="row-fluid">
      <div class="span2 offset1">
        <label class="control-label"
          for="nombre">Nombre *</label>
      </div>
      <div class="span3 last">
        <input type="text" name="nombre" id="nombre" required
          class="large" value="{{currSchedule.nombre}}"></input>
      </div>
    </div>

    <div class="row-fluid">
      <div class="span2 offset1">
        <label class="control-label"
          for="conjuntoFrasesIds">Conjuntos de frases</label>
      </div>
      <div class="span3 last">

        {{#isolate}}
          <select class="chosen" type="text"
            name="conjuntoFrasesIds" id="{{random}}-conjuntoFrasesIds"
            multiple="multiple"
            data-width="100%" data-asarray>
          {{#each conjuntosFrases}}
            {{#if $in this._id currSchedule.conjuntoFrasesIds}}
              <option value="{{this._id}}" selected="selected">{{this.nombre}}</option>
            {{else}}
              <option value="{{this._id}}">{{this.nombre}}</option>
            {{/if}}
          {{/each}}
          </select>
        {{/isolate}}
      </div>
    </div>

    <div class="row-fluid">
      <div class="span2 offset1">
        <label class="control-label"
          for="conjuntoPreguntasIds">Conjuntos de preguntas</label>
      </div>
      <div class="span3 last">

        {{#isolate}}
          <select class="chosen" type="text"
            name="conjuntoPreguntasIds" id="{{random}}-conjuntoPreguntasIds"
            multiple="multiple"
            data-width="100%" data-asarray>
          {{#each conjuntosPreguntas}}
            {{#if $in this._id currSchedule.conjuntoPreguntasIds}}
              <option value="{{this._id}}" selected="selected">{{this.nombre}}</option>
            {{else}}
              <option value="{{this._id}}">{{this.nombre}}</option>
            {{/if}}
          {{/each}}
          </select>
        {{/isolate}}
      </div>
    </div>

    <div class="row-fluid">
      <div class="span2 offset1">
        <label class="control-label"
          for="tagsAUsar">Tags a usar</label>
      </div>
      <div class="span3 last">
        {{ tagsInput name="tagsAUsar" value=currSchedule.tagsAUsar }}
      </div>
    </div>

    <div class="row-fluid">
      <div class="span4 offset1">
        <button type="submit">Guardar</button>
      </div>
    </div>

    {{#if currSchedule}}
      <div class="row-fluid">
        <div class="span11 offset1 last"><h4>Entradas</h4></div>
      </div>
      <div class="row-fluid">
        <div class="span11 offset1 last">
          <div id="entradas-table"></div>
        </div>
      </div>

      <div class="row-fluid">
        <div class="span4 offset1">
          <button type="submit">Guardar</button>
        </div>
      </div>
    {{/if}}
  </form>
</template>